/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// src/Plugin.ts
var import_obsidian6 = require("obsidian");

// src/Settings.ts
var import_obsidian = require("obsidian");
var _notename = "${notename}";
var _filename = "${filename}";
var _datetime = "${datetime}";
var DEFAULT_SETTINGS = {
  folderName: `${_filename}_Attachments`,
  pastedImageName: `${_notename}-${_datetime}`,
  datetimeFormat: "YYYYMMDDHHmmssSSS",
  hideFolder: false,
  autoRenameFolder: true,
  autoRenameFiles: true,
  autoDeleteFolder: false
};
var containsFilename = (settings) => {
  return settings.folderName.contains(_filename);
};
var encode = (text) => {
  const specialCharacters = ["\\$", "\\[", "\\]", "\\{", "\\}", "\\(", "\\)", "\\*", "\\+", "\\.", "\\?", "\\\\", "\\^"];
  const reg = new RegExp("[" + specialCharacters.join("") + "]", "gi");
  return text.replace(reg, (character) => `\\${character}`);
};
var buildFolderRegExp = (settings) => {
  let reg = encode(settings.folderName);
  reg = reg.replace(encode(_filename), ".+");
  return new RegExp("^" + reg + "$");
};
var buildFolderName = (settings, fileName) => {
  return "./" + settings.folderName.replace(_filename, fileName);
};
var buildPastedImageName = (settings, notename) => {
  const datetime = (0, import_obsidian.moment)().format(settings.datetimeFormat);
  return settings.pastedImageName.replace(_notename, notename).replace(_datetime, datetime);
};

// src/SettingTab.ts
var import_obsidian2 = require("obsidian");

// src/lang/zh.ts
var zh_default = {
  "plugin_name": "\u9644\u4EF6\u7BA1\u7406\u5668",
  "settings_folder_name": "\u9644\u4EF6\u6587\u4EF6\u5939",
  "settings_folder_name_desc": "\u9644\u4EF6\u6587\u4EF6\u5939\u7684\u540D\u79F0\uFF0C\u4F7F\u7528\u53D8\u91CF ${filename} \u83B7\u53D6\u7B14\u8BB0\uFF08md/canvas\uFF09\u6587\u4EF6\u540D\u79F0\uFF08\u5305\u542B\u540E\u7F00\uFF09\uFF0C\u4F8B\uFF1A${filename}_Attachments\u3002",
  "settings_pasted_image_file_name": "\u201C\u7C98\u8D34\u56FE\u7247\u201D\u6587\u4EF6\u540D",
  "settings_pasted_image_file_name_desc": "\u201C\u7C98\u8D34\u56FE\u7247\u201D\u4FDD\u5B58\u4E3A\u6587\u4EF6\u7684\u540D\u79F0\uFF0C\u4F7F\u7528\u53D8\u91CF ${notename} \u83B7\u53D6\u7B14\u8BB0\uFF08md/canvas\uFF09\u540D\u79F0\uFF0C\u4F7F\u7528\u53D8\u91CF ${datetime} \u83B7\u53D6\u65F6\u95F4\uFF0C\u4F8B\uFF1A${notename}-${datetime}\u3002",
  "settings_datetime_format": "${datetime} \u683C\u5F0F",
  "settings_datetime_format_desc": "\u65E5\u671F\u65F6\u95F4\u683C\u5F0F\uFF08\u4F7F\u7528 moment.js \u683C\u5F0F\uFF09\uFF0C\u4F8B\uFF1AYYYYMMDDHHmmssSSS\u3002",
  "settings_hide_folder": "\u9690\u85CF\u9644\u4EF6\u6587\u4EF6\u5939",
  "settings_auto_rename_folder": "\u81EA\u52A8\u91CD\u547D\u540D\u9644\u4EF6\u6587\u4EF6\u5939",
  "settings_auto_rename_folder_desc": "\u7B14\u8BB0\uFF08md/canvas\uFF09\u540D\u79F0\u53D8\u5316\u65F6\uFF0C\u5982\u679C\u9644\u4EF6\u6587\u4EF6\u5939\u540D\u79F0\u4E2D\u5305\u542B\u201C${filename}\u201D\uFF0C\u81EA\u52A8\u91CD\u547D\u540D\u9644\u4EF6\u6587\u4EF6\u5939\u3002",
  "settings_auto_rename_files": "\u81EA\u52A8\u91CD\u547D\u540D\u9644\u4EF6\u6587\u4EF6",
  "settings_auto_rename_files_desc": "\u7B14\u8BB0\uFF08md/canvas\uFF09\u540D\u79F0\u53D8\u5316\u65F6\uFF0C\u5982\u679C\u9644\u4EF6\u6587\u4EF6\u540D\u79F0\u4E2D\u5305\u542B\u201C${notename}\u201D\uFF0C\u81EA\u52A8\u91CD\u547D\u540D\u9644\u4EF6\u6587\u4EF6\u3002",
  "settings_auto_delete_folder": "\u81EA\u52A8\u5220\u9664\u9644\u4EF6\u6587\u4EF6\u5939",
  "settings_auto_delete_folder_desc": "\u7B14\u8BB0\uFF08md/canvas\uFF09\u5220\u9664\u65F6\uFF0C\u5982\u679C\u9644\u4EF6\u6587\u4EF6\u5939\u540D\u79F0\u4E2D\u5305\u542B\u201C${filename}\u201D\uFF0C\u81EA\u52A8\u5220\u9664\u9644\u4EF6\u6587\u4EF6\u5939\u3002",
  "command_toggle_attachment_folder_visibility": "\u5207\u6362\u9644\u4EF6\u6587\u4EF6\u5939\u7684\u201C\u663E\u793A/\u9690\u85CF\u201D",
  "status_attachment_folder_visibility": "\u9644\u4EF6\u6587\u4EF6\u5939\u5DF2\u9690\u85CF"
};

// src/lang/en.ts
var en_default = {
  "plugin_name": "Attachment Manager",
  "settings_folder_name": "Attachment Folder",
  "settings_folder_name_desc": 'The name of the attachment folder, using the variable ${filename} to get name of the note("md/canvas") file. e.g., ${filename}_Attachments .',
  "settings_pasted_image_file_name": "Pasted Image Name",
  "settings_pasted_image_file_name_desc": '"Pasted Image" file name, using the variable ${notename} to get name of the note("md/canvas"), using the variable ${datetime} to get datetime. e.g., ${notename}-${datetime}) .',
  "settings_datetime_format": "${datetime} Format",
  "settings_datetime_format_desc": "Format for ${datetime} (use moment.js format). e.g., YYYYMMDDHHmmssSSS .",
  "settings_hide_folder": "Hide attachment folder",
  "settings_auto_rename_folder": "Automatically rename attachment folder",
  "settings_auto_rename_folder_desc": 'When renaming note("md/canvas"), automatically rename attachment folder if folder name contains "${filename}".',
  "settings_auto_rename_files": "Automatically rename attachment files",
  "settings_auto_rename_files_desc": 'When renaming note("md/canvas"), automatically rename attachment files if file name contains "${notename}".',
  "settings_auto_delete_folder": "Automatically delete attachment folder",
  "settings_auto_delete_folder_desc": 'When deleting note("md/canvas"), automatically delete attachment folder if folder name contains "${filename}".',
  "command_toggle_attachment_folder_visibility": "Toggle visibility of attachment folder",
  "status_attachment_folder_visibility": "Attachment folder are hidden."
};

// src/lang/index.ts
var lang = {
  en: en_default,
  zh: zh_default,
  get(key, ...args) {
    const language = window.localStorage.getItem("language") || "en";
    const _lang = this[language] || en_default;
    let text = _lang[key] || key;
    if (args) {
      for (let i = 0; i < args.length; i++) {
        text = text.replace(new RegExp(`\\{\\{${i}\\}\\}`, "g"), args[i]);
      }
    }
    return text;
  }
};

// src/SettingTab.ts
var SettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_folder_name")).setDesc(lang.get("settings_folder_name_desc")).addText((text) => text.setPlaceholder(DEFAULT_SETTINGS.folderName).setValue(this.plugin.settings.folderName).onChange(async (value) => {
      value = (0, import_obsidian2.normalizePath)(value);
      this.plugin.settings.folderName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_pasted_image_file_name")).setDesc(lang.get("settings_pasted_image_file_name_desc")).addText((text) => text.setPlaceholder(DEFAULT_SETTINGS.pastedImageName).setValue(this.plugin.settings.pastedImageName).onChange(async (value) => {
      this.plugin.settings.pastedImageName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_datetime_format")).setDesc(lang.get("settings_datetime_format_desc")).addMomentFormat((text) => text.setDefaultFormat(DEFAULT_SETTINGS.datetimeFormat).setValue(this.plugin.settings.datetimeFormat).onChange(async (value) => {
      this.plugin.settings.datetimeFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_hide_folder")).addToggle((toggle) => toggle.setValue(this.plugin.settings.hideFolder).onChange(async (value) => {
      this.plugin.settings.hideFolder = value;
      await this.plugin.saveSettings();
      await this.plugin.hideFolder.refresh();
    }));
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_auto_rename_folder")).setDesc(lang.get("settings_auto_rename_folder_desc")).addToggle((toggle) => toggle.setValue(this.plugin.settings.autoRenameFolder).onChange(async (value) => {
      this.plugin.settings.autoRenameFolder = value;
      await this.plugin.saveSettings();
    }));
    if (this.plugin.settings.autoRenameFolder)
      new import_obsidian2.Setting(containerEl).setName(lang.get("settings_auto_rename_files")).setDesc(lang.get("settings_auto_rename_files_desc")).addToggle((toggle) => toggle.setValue(this.plugin.settings.autoRenameFiles).onChange(async (value) => {
        this.plugin.settings.autoRenameFiles = value;
        await this.plugin.saveSettings();
      }));
    new import_obsidian2.Setting(containerEl).setName(lang.get("settings_auto_delete_folder")).setDesc(lang.get("settings_auto_delete_folder_desc")).addToggle((toggle) => toggle.setValue(this.plugin.settings.autoDeleteFolder).onChange(async (value) => {
      this.plugin.settings.autoDeleteFolder = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/components/VaultAttachmentConfiguration.ts
var VaultAttachmentConfiguration = class {
  constructor(vault) {
    this.key = "attachmentFolderPath";
    this.key2 = "newLinkFormat";
    this.vault = vault;
  }
  backup() {
    this._value = this.vault.getConfig(this.key);
    this._value2 = this.vault.getConfig(this.key2);
    this.vault.setConfig(this.key2, "relative");
  }
  update(value) {
    this.vault.setConfig(this.key, value);
  }
  restore() {
    this.vault.setConfig(this.key, this._value);
    this.vault.setConfig(this.key2, this._value2);
  }
};

// src/handler/FileOpenHandler.ts
var FileOpenHandler = class {
  static build(plugin) {
    const handler = new FileOpenHandler(plugin);
    return handler.handle.bind(handler);
  }
  constructor(plugin) {
    this.plugin = plugin;
    this.vaultAttachmentConfiguration = plugin.vaultAttachmentConfiguration;
  }
  async handle(file) {
    console.log("Handle File Open");
    if (file == null) {
      return;
    }
    if (file.extension !== "md" && file.extension !== "canvas") {
      return;
    }
    this.vaultAttachmentConfiguration.update(buildFolderName(this.plugin.settings, file.name));
  }
};

// src/handler/DeleteHandler.ts
var Path = __toESM(require("path"));
var DeleteHandler = class {
  static build(plugin) {
    const handler = new DeleteHandler(plugin);
    return handler.handle.bind(handler);
  }
  constructor(plugin) {
    this.vault = plugin.app.vault;
    this.plugin = plugin;
    this.adapter = plugin.adapter;
    this.vaultAttachmentConfiguration = plugin.vaultAttachmentConfiguration;
  }
  async handle(file) {
    console.log("Handle Delete");
    if (file.extension !== "md" && file.extension !== "canvas") {
      return;
    }
    if (!containsFilename(this.plugin.settings) || !this.plugin.settings.autoDeleteFolder) {
      return;
    }
    const folderPath = Path.join(Path.dirname(file.path), buildFolderName(this.plugin.settings, file.name));
    if (await this.adapter.exists(folderPath)) {
      const trashOption = this.vault.getConfig("trashOption");
      if (trashOption === "system") {
        await this.adapter.trashSystem(folderPath);
      } else if (trashOption === "local") {
        await this.adapter.trashLocal(folderPath);
      } else {
        await this.adapter.remove(folderPath);
      }
      console.log("Deleted", folderPath);
    }
  }
};

// src/handler/RenameHandler.ts
var import_obsidian3 = require("obsidian");
var Path2 = __toESM(require("path"));
var RenameHandler = class {
  static build(plugin) {
    const handler = new RenameHandler(plugin);
    return handler.handle.bind(handler);
  }
  constructor(plugin) {
    this.vault = plugin.app.vault;
    this.plugin = plugin;
    this.adapter = plugin.adapter;
    this.fileManager = plugin.app.fileManager;
    this.vaultAttachmentConfiguration = plugin.vaultAttachmentConfiguration;
  }
  async handle(newFile, oldFilePath) {
    console.log("Handle Rename");
    if (!(newFile instanceof import_obsidian3.TFile)) {
      return;
    }
    if (newFile.extension !== "md" && newFile.extension !== "canvas") {
      return;
    }
    if (!containsFilename(this.plugin.settings) || !this.plugin.settings.autoRenameFolder) {
      return;
    }
    const newFolderName = buildFolderName(this.plugin.settings, newFile.name);
    this.vaultAttachmentConfiguration.update(newFolderName);
    const newFolderPath = (0, import_obsidian3.normalizePath)(Path2.join(Path2.dirname(newFile.path), newFolderName));
    const oldFolderPath = (0, import_obsidian3.normalizePath)(Path2.join(Path2.dirname(oldFilePath), buildFolderName(this.plugin.settings, Path2.basename(oldFilePath))));
    await this._renameFolder(oldFolderPath, newFolderPath);
    if (!this.plugin.settings.autoRenameFiles) {
      return;
    }
    await this._renameFiles(newFolderPath, newFile.basename, Path2.basename(oldFilePath, "." + newFile.extension));
  }
  async _renameFolder(oldFolderPath, newFolderPath) {
    if (await !this.adapter.exists(oldFolderPath) || oldFolderPath === newFolderPath) {
      return;
    }
    const oldFolder = this.vault.getAbstractFileByPath(oldFolderPath);
    if (oldFolder == null) {
      return;
    }
    await this.fileManager.renameFile(oldFolder, newFolderPath);
    const oldFolderParentPath = Path2.dirname(oldFolderPath);
    const oldFolderParentListedFiles = await this.adapter.list(oldFolderParentPath);
    if (oldFolderParentListedFiles.folders.length === 0 && oldFolderParentListedFiles.files.length === 0) {
      await this.adapter.rmdir(oldFolderParentPath, true);
    }
  }
  async _renameFiles(newFolderPath, newFileName, oldFileName) {
    const attachmentFiles = (await this.adapter.list(newFolderPath)).files;
    for (const file of attachmentFiles) {
      let attachmentFileName = Path2.basename(file);
      if (!attachmentFileName.contains(oldFileName)) {
        continue;
      }
      attachmentFileName = attachmentFileName.replace(oldFileName, newFileName);
      const newFilePath = (0, import_obsidian3.normalizePath)(Path2.join(newFolderPath, attachmentFileName));
      const attachmentFile = this.vault.getAbstractFileByPath(file);
      if (attachmentFile == null) {
        continue;
      }
      await this.fileManager.renameFile(attachmentFile, newFilePath);
    }
  }
};

// src/components/HideFolder.ts
var import_obsidian4 = require("obsidian");
var HideFolder = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  load() {
    this.ribbonIconButton = this.plugin.addRibbonIcon(
      this.plugin.settings.hideFolder ? "eye-off" : "eye",
      lang.get("command_toggle_attachment_folder_visibility"),
      (evt) => {
        this.plugin.settings.hideFolder = !this.plugin.settings.hideFolder;
        this.plugin.saveSettings();
        this.refresh();
      }
    );
    this.statusBarItem = this.plugin.addStatusBarItem();
    this.statusBarItem.setText(this.plugin.settings.hideFolder ? "Attachment folders are hidden" : "");
    this.plugin.addCommand({
      id: "toggle-attachment-folder_visibility",
      name: lang.get("command_toggle_attachment_folder_visibility"),
      callback: () => {
        this.plugin.settings.hideFolder = !this.plugin.settings.hideFolder;
        this.plugin.saveSettings();
        this.refresh();
      }
    });
    this.mutationObserver = new MutationObserver((mutationRecord) => {
      mutationRecord.forEach((record) => {
        var _a, _b;
        if ((_b = (_a = record.target) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("nav-folder")) {
          this.refreshFolders();
        }
      });
    });
    window.setTimeout(() => {
      this.mutationObserver.observe(window.document, { childList: true, subtree: true });
    }, 1e3);
  }
  async refresh() {
    (0, import_obsidian4.setIcon)(this.ribbonIconButton, this.plugin.settings.hideFolder ? "eye-off" : "eye");
    this.statusBarItem.innerHTML = this.plugin.settings.hideFolder ? lang.get("status_attachment_folder_visibility") : "";
    await this.refreshFolders();
  }
  async refreshFolders() {
    const filter = buildFolderRegExp(this.plugin.settings);
    const folders = document.querySelectorAll(".nav-folder");
    folders.forEach((folder) => {
      const title = folder.querySelector(".nav-folder-title-content");
      const folderName = title == null ? void 0 : title.innerText;
      if (filter.test(folderName)) {
        folder.style.display = this.plugin.settings.hideFolder ? "none" : "";
      }
    });
  }
  unload() {
    this.mutationObserver.disconnect();
  }
};

// src/handler/CreateHandler.ts
var import_obsidian5 = require("obsidian");
var Path3 = __toESM(require("path"));
var CreateHandler = class {
  static build(plugin) {
    const handler = new CreateHandler(plugin);
    return handler.handle.bind(handler);
  }
  constructor(plugin) {
    this.vault = plugin.app.vault;
    this.plugin = plugin;
    this.workspace = plugin.app.workspace;
    this.fileManager = plugin.app.fileManager;
    this.vaultAttachmentConfiguration = plugin.vaultAttachmentConfiguration;
  }
  async handle(file) {
    console.log("Handle File Create");
    if (!(file instanceof import_obsidian5.TFile)) {
      return;
    }
    if (!file.name.startsWith("Pasted image ")) {
      return;
    }
    const activeView = this.workspace.getActiveViewOfType(import_obsidian5.TextFileView);
    const activeFile = activeView == null ? void 0 : activeView.file;
    if (!activeFile) {
      return;
    }
    if (activeFile.extension !== "md" && activeFile.extension !== "canvas") {
      return;
    }
    const folderPath = Path3.join(Path3.dirname(activeFile.path), buildFolderName(this.plugin.settings, activeFile.name));
    if (!file.path.startsWith(folderPath)) {
      return;
    }
    const imagePath = (0, import_obsidian5.normalizePath)(Path3.join(folderPath, buildPastedImageName(this.plugin.settings, activeFile.basename) + "." + file.extension));
    if (activeFile.extension === "md") {
      this._rename4MD(file, imagePath, activeView, activeFile);
    }
    if (activeFile.extension === "canvas") {
      this._rename4Canvas(file, imagePath, activeView);
    }
  }
  async _rename4MD(file, newPath, activeView, activeFile) {
    const oldLinkText = this.fileManager.generateMarkdownLink(file, activeFile.path);
    await this.fileManager.renameFile(file, newPath);
    const newLinkText = this.fileManager.generateMarkdownLink(file, activeFile.path);
    let content = activeView.getViewData();
    content = content.replace(oldLinkText, newLinkText);
    activeView.setViewData(content, false);
  }
  async _rename4Canvas(file, newPath, activeView) {
    const oldPath = file.path;
    await this.fileManager.renameFile(file, newPath);
    let content = activeView.getViewData();
    content = content.replace(`/(file\\s*\\:\\s*\\")${oldPath}(\\")/g`, `$1${newPath}$2`);
    activeView.setViewData(content, false);
  }
};

// src/Plugin.ts
var Plugin = class extends import_obsidian6.Plugin {
  async onload() {
    console.log("loading plugin");
    this.adapter = this.app.vault.adapter;
    this.vaultAttachmentConfiguration = new VaultAttachmentConfiguration(this.app.vault);
    this.vaultAttachmentConfiguration.backup();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.addSettingTab(new SettingTab(this.app, this));
    this.registerEvent(this.app.workspace.on("file-open", FileOpenHandler.build(this)));
    this.registerEvent(this.app.vault.on("create", CreateHandler.build(this)));
    this.registerEvent(this.app.vault.on("rename", RenameHandler.build(this)));
    this.registerEvent(this.app.vault.on("delete", DeleteHandler.build(this)));
    this.hideFolder = new HideFolder(this);
    this.hideFolder.load();
  }
  onunload() {
    console.log("unloading plugin");
    this.vaultAttachmentConfiguration.restore();
    this.hideFolder.unload();
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};

// main.ts
var main_default = Plugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvUGx1Z2luLnRzIiwgInNyYy9TZXR0aW5ncy50cyIsICJzcmMvU2V0dGluZ1RhYi50cyIsICJzcmMvbGFuZy96aC50cyIsICJzcmMvbGFuZy9lbi50cyIsICJzcmMvbGFuZy9pbmRleC50cyIsICJzcmMvY29tcG9uZW50cy9WYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uLnRzIiwgInNyYy9oYW5kbGVyL0ZpbGVPcGVuSGFuZGxlci50cyIsICJzcmMvaGFuZGxlci9EZWxldGVIYW5kbGVyLnRzIiwgInNyYy9oYW5kbGVyL1JlbmFtZUhhbmRsZXIudHMiLCAic3JjL2NvbXBvbmVudHMvSGlkZUZvbGRlci50cyIsICJzcmMvaGFuZGxlci9DcmVhdGVIYW5kbGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICcuL3NyYy9QbHVnaW4nO1xuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW47IiwgImltcG9ydCB7IFBsdWdpbiBhcyBPYnNpZGlhblBsdWdpbiwgRmlsZVN5c3RlbUFkYXB0ZXIgfSBmcm9tICdvYnNpZGlhbic7XG5cbmltcG9ydCB7IFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vU2V0dGluZ3NcIjtcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICcuL1NldHRpbmdUYWInO1xuaW1wb3J0IHsgVmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy9WYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEZpbGVPcGVuSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlci9GaWxlT3BlbkhhbmRsZXInO1xuaW1wb3J0IHsgRGVsZXRlSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlci9EZWxldGVIYW5kbGVyJztcbmltcG9ydCB7IFJlbmFtZUhhbmRsZXIgfSBmcm9tICcuL2hhbmRsZXIvUmVuYW1lSGFuZGxlcic7XG5pbXBvcnQgeyBIaWRlRm9sZGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL0hpZGVGb2xkZXInO1xuaW1wb3J0IHsgQ3JlYXRlSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlci9DcmVhdGVIYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIFBsdWdpbiBleHRlbmRzIE9ic2lkaWFuUGx1Z2luIHtcbiAgICBzZXR0aW5nczogU2V0dGluZ3NcbiAgICBoaWRlRm9sZGVyOiBIaWRlRm9sZGVyXG4gICAgYWRhcHRlcjogRmlsZVN5c3RlbUFkYXB0ZXJcbiAgICB2YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uOiBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uXG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIHBsdWdpbicpO1xuXG4gICAgICAgIHRoaXMuYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgRmlsZVN5c3RlbUFkYXB0ZXI7XG4gICAgICAgIHRoaXMudmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbiA9IG5ldyBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uKHRoaXMuYXBwLnZhdWx0KTtcbiAgICAgICAgdGhpcy52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uLmJhY2t1cCgpO1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIC8vIFx1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCBGaWxlT3BlbkhhbmRsZXIuYnVpbGQodGhpcykpKTtcbiAgICAgICAgLy8gXHU2NTg3XHU0RUY2XHU1MjFCXHU1RUZBXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignY3JlYXRlJywgQ3JlYXRlSGFuZGxlci5idWlsZCh0aGlzKSkpO1xuICAgICAgICAvLyBcdTY1ODdcdTRFRjZcdTkxQ0RcdTU0N0RcdTU0MERcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCBSZW5hbWVIYW5kbGVyLmJ1aWxkKHRoaXMpKSk7XG4gICAgICAgIC8vIFx1NjU4N1x1NEVGNlx1NTIyMFx1OTY2NFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIERlbGV0ZUhhbmRsZXIuYnVpbGQodGhpcykpKTtcblxuICAgICAgICB0aGlzLmhpZGVGb2xkZXIgPSBuZXcgSGlkZUZvbGRlcih0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlRm9sZGVyLmxvYWQoKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3VubG9hZGluZyBwbHVnaW4nKTtcbiAgICAgICAgdGhpcy52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uLnJlc3RvcmUoKTtcbiAgICAgICAgdGhpcy5oaWRlRm9sZGVyLnVubG9hZCgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3Mge1xuICAgIGZvbGRlck5hbWU6IHN0cmluZztcbiAgICBwYXN0ZWRJbWFnZU5hbWU6IHN0cmluZztcbiAgICBkYXRldGltZUZvcm1hdDogc3RyaW5nO1xuICAgIGhpZGVGb2xkZXI6IGJvb2xlYW47XG4gICAgYXV0b1JlbmFtZUZvbGRlcjogYm9vbGVhbjtcbiAgICBhdXRvUmVuYW1lRmlsZXM6IGJvb2xlYW47XG4gICAgYXV0b0RlbGV0ZUZvbGRlcjogYm9vbGVhbjtcbn1cblxuY29uc3QgX25vdGVuYW1lID0gXCIke25vdGVuYW1lfVwiO1xuY29uc3QgX2ZpbGVuYW1lID0gXCIke2ZpbGVuYW1lfVwiO1xuY29uc3QgX2RhdGV0aW1lID0gXCIke2RhdGV0aW1lfVwiO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogU2V0dGluZ3MgPSB7XG4gICAgZm9sZGVyTmFtZTogYCR7X2ZpbGVuYW1lfV9BdHRhY2htZW50c2AsXG4gICAgcGFzdGVkSW1hZ2VOYW1lOiBgJHtfbm90ZW5hbWV9LSR7X2RhdGV0aW1lfWAsXG4gICAgZGF0ZXRpbWVGb3JtYXQ6ICdZWVlZTU1EREhIbW1zc1NTUycsXG4gICAgaGlkZUZvbGRlcjogZmFsc2UsXG4gICAgYXV0b1JlbmFtZUZvbGRlcjogdHJ1ZSxcbiAgICBhdXRvUmVuYW1lRmlsZXM6IHRydWUsXG4gICAgYXV0b0RlbGV0ZUZvbGRlcjogZmFsc2UsXG59XG5cbmV4cG9ydCBjb25zdCBjb250YWluc0ZpbGVuYW1lID0gKHNldHRpbmdzOiBTZXR0aW5ncykgPT4ge1xuICAgIHJldHVybiBzZXR0aW5ncy5mb2xkZXJOYW1lLmNvbnRhaW5zKF9maWxlbmFtZSk7XG59XG5cbmNvbnN0IGVuY29kZSA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAvLyBcdTcyNzlcdTZCOEFcdTVCNTdcdTdCMjZcbiAgICBjb25zdCBzcGVjaWFsQ2hhcmFjdGVycyA9IFtcIlxcXFwkXCIsIFwiXFxcXFtcIiwgXCJcXFxcXVwiLCBcIlxcXFx7XCIsIFwiXFxcXH1cIiwgXCJcXFxcKFwiLCBcIlxcXFwpXCIsIFwiXFxcXCpcIiwgXCJcXFxcK1wiLCBcIlxcXFwuXCIsIFwiXFxcXD9cIiwgXCJcXFxcXFxcXFwiLCBcIlxcXFxeXCJdO1xuICAgIC8vIFx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlx1NzY4NFx1NTMzOVx1OTE0RFx1NkI2M1x1NTIxOVxuICAgIGNvbnN0IHJlZyA9IG5ldyBSZWdFeHAoXCJbXCIgKyBzcGVjaWFsQ2hhcmFjdGVycy5qb2luKFwiXCIpICsgXCJdXCIsICdnaScpO1xuICAgIC8vIFx1NUJGOVx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlx1OEZEQlx1ODg0Q1x1OEY2Q1x1NEU0OVxuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UocmVnLCAoY2hhcmFjdGVyOiBzdHJpbmcpID0+IGBcXFxcJHtjaGFyYWN0ZXJ9YCk7XG59XG5cbmV4cG9ydCBjb25zdCBidWlsZEZvbGRlclJlZ0V4cCA9IChzZXR0aW5nczogU2V0dGluZ3MpID0+IHtcbiAgICBsZXQgcmVnID0gZW5jb2RlKHNldHRpbmdzLmZvbGRlck5hbWUpO1xuICAgIHJlZyA9IHJlZy5yZXBsYWNlKGVuY29kZShfZmlsZW5hbWUpLCBcIi4rXCIpO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFwiXlwiICsgcmVnICsgXCIkXCIpO1xufVxuXG5leHBvcnQgY29uc3QgYnVpbGRGb2xkZXJOYW1lID0gKHNldHRpbmdzOiBTZXR0aW5ncywgZmlsZU5hbWU6IHN0cmluZykgPT4ge1xuICAgIC8vIFx1NjMwN1x1NUI5QVx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1NjI0MFx1NTcyOFx1NjU4N1x1NEVGNlx1NTkzOVx1RkYwOFwiLi9cIlx1RkYwOVx1NEUwQlx1NjMwN1x1NUI5QVx1NzY4NFx1NjU4N1x1NEVGNlx1NTkzOVxuICAgIHJldHVybiBcIi4vXCIgKyBzZXR0aW5ncy5mb2xkZXJOYW1lLnJlcGxhY2UoX2ZpbGVuYW1lLCBmaWxlTmFtZSk7XG59XG5cbmV4cG9ydCBjb25zdCBidWlsZFBhc3RlZEltYWdlTmFtZSA9IChzZXR0aW5nczogU2V0dGluZ3MsIG5vdGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRldGltZSA9IG1vbWVudCgpLmZvcm1hdChzZXR0aW5ncy5kYXRldGltZUZvcm1hdCk7XG4gICAgcmV0dXJuIHNldHRpbmdzLnBhc3RlZEltYWdlTmFtZS5yZXBsYWNlKF9ub3RlbmFtZSwgbm90ZW5hbWUpLnJlcGxhY2UoX2RhdGV0aW1lLCBkYXRldGltZSk7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgbGFuZyB9IGZyb20gJy4vbGFuZydcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJy4vUGx1Z2luJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL1NldHRpbmdzJztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKGxhbmcuZ2V0KCdzZXR0aW5nc19mb2xkZXJfbmFtZScpKVxuICAgICAgICAgICAgLnNldERlc2MobGFuZy5nZXQoJ3NldHRpbmdzX2ZvbGRlcl9uYW1lX2Rlc2MnKSlcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmZvbGRlck5hbWUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5hbWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbm9ybWFsaXplUGF0aCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobGFuZy5nZXQoJ3NldHRpbmdzX3Bhc3RlZF9pbWFnZV9maWxlX25hbWUnKSlcbiAgICAgICAgICAgIC5zZXREZXNjKGxhbmcuZ2V0KCdzZXR0aW5nc19wYXN0ZWRfaW1hZ2VfZmlsZV9uYW1lX2Rlc2MnKSlcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnBhc3RlZEltYWdlTmFtZSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFzdGVkSW1hZ2VOYW1lKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYXN0ZWRJbWFnZU5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobGFuZy5nZXQoJ3NldHRpbmdzX2RhdGV0aW1lX2Zvcm1hdCcpKVxuICAgICAgICAgICAgLnNldERlc2MobGFuZy5nZXQoJ3NldHRpbmdzX2RhdGV0aW1lX2Zvcm1hdF9kZXNjJykpXG4gICAgICAgICAgICAuYWRkTW9tZW50Rm9ybWF0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXREZWZhdWx0Rm9ybWF0KERFRkFVTFRfU0VUVElOR1MuZGF0ZXRpbWVGb3JtYXQpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGV0aW1lRm9ybWF0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRldGltZUZvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShsYW5nLmdldCgnc2V0dGluZ3NfaGlkZV9mb2xkZXInKSlcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlRm9sZGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaGlkZUZvbGRlci5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fcmVuYW1lX2ZvbGRlcicpKVxuICAgICAgICAgICAgLnNldERlc2MobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fcmVuYW1lX2ZvbGRlcl9kZXNjJykpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZUZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWVGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lRm9sZGVyKVxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fcmVuYW1lX2ZpbGVzJykpXG4gICAgICAgICAgICAgICAgLnNldERlc2MobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fcmVuYW1lX2ZpbGVzX2Rlc2MnKSlcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWVGaWxlcylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZUZpbGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fZGVsZXRlX2ZvbGRlcicpKVxuICAgICAgICAgICAgLnNldERlc2MobGFuZy5nZXQoJ3NldHRpbmdzX2F1dG9fZGVsZXRlX2ZvbGRlcl9kZXNjJykpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0RlbGV0ZUZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9EZWxldGVGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn1cbiIsICJleHBvcnQgZGVmYXVsdCB7XG4gICAgXCJwbHVnaW5fbmFtZVwiOiBcIlx1OTY0NFx1NEVGNlx1N0JBMVx1NzQwNlx1NTY2OFwiLFxuICAgIFwic2V0dGluZ3NfZm9sZGVyX25hbWVcIjogXCJcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcIixcbiAgICBcInNldHRpbmdzX2ZvbGRlcl9uYW1lX2Rlc2NcIjogXCJcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcdTc2ODRcdTU0MERcdTc5RjBcdUZGMENcdTRGN0ZcdTc1MjhcdTUzRDhcdTkxQ0YgJHtmaWxlbmFtZX0gXHU4M0I3XHU1M0Q2XHU3QjE0XHU4QkIwXHVGRjA4bWQvY2FudmFzXHVGRjA5XHU2NTg3XHU0RUY2XHU1NDBEXHU3OUYwXHVGRjA4XHU1MzA1XHU1NDJCXHU1NDBFXHU3RjAwXHVGRjA5XHVGRjBDXHU0RjhCXHVGRjFBJHtmaWxlbmFtZX1fQXR0YWNobWVudHNcdTMwMDJcIixcbiAgICBcInNldHRpbmdzX3Bhc3RlZF9pbWFnZV9maWxlX25hbWVcIjogXCJcdTIwMUNcdTdDOThcdThEMzRcdTU2RkVcdTcyNDdcdTIwMURcdTY1ODdcdTRFRjZcdTU0MERcIixcbiAgICBcInNldHRpbmdzX3Bhc3RlZF9pbWFnZV9maWxlX25hbWVfZGVzY1wiOiBcIlx1MjAxQ1x1N0M5OFx1OEQzNFx1NTZGRVx1NzI0N1x1MjAxRFx1NEZERFx1NUI1OFx1NEUzQVx1NjU4N1x1NEVGNlx1NzY4NFx1NTQwRFx1NzlGMFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NTNEOFx1OTFDRiAke25vdGVuYW1lfSBcdTgzQjdcdTUzRDZcdTdCMTRcdThCQjBcdUZGMDhtZC9jYW52YXNcdUZGMDlcdTU0MERcdTc5RjBcdUZGMENcdTRGN0ZcdTc1MjhcdTUzRDhcdTkxQ0YgJHtkYXRldGltZX0gXHU4M0I3XHU1M0Q2XHU2NUY2XHU5NUY0XHVGRjBDXHU0RjhCXHVGRjFBJHtub3RlbmFtZX0tJHtkYXRldGltZX1cdTMwMDJcIixcbiAgICBcInNldHRpbmdzX2RhdGV0aW1lX2Zvcm1hdFwiOiBcIiR7ZGF0ZXRpbWV9IFx1NjgzQ1x1NUYwRlwiLFxuICAgIFwic2V0dGluZ3NfZGF0ZXRpbWVfZm9ybWF0X2Rlc2NcIjogXCJcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTY4M0NcdTVGMEZcdUZGMDhcdTRGN0ZcdTc1MjggbW9tZW50LmpzIFx1NjgzQ1x1NUYwRlx1RkYwOVx1RkYwQ1x1NEY4Qlx1RkYxQVlZWVlNTURESEhtbXNzU1NTXHUzMDAyXCIsXG4gICAgXCJzZXR0aW5nc19oaWRlX2ZvbGRlclwiOiBcIlx1OTY5MFx1ODVDRlx1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlx1NTkzOVwiLFxuICAgIFwic2V0dGluZ3NfYXV0b19yZW5hbWVfZm9sZGVyXCI6IFwiXHU4MUVBXHU1MkE4XHU5MUNEXHU1NDdEXHU1NDBEXHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XHU1OTM5XCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX3JlbmFtZV9mb2xkZXJfZGVzY1wiOiBcIlx1N0IxNFx1OEJCMFx1RkYwOG1kL2NhbnZhc1x1RkYwOVx1NTQwRFx1NzlGMFx1NTNEOFx1NTMxNlx1NjVGNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlx1NTkzOVx1NTQwRFx1NzlGMFx1NEUyRFx1NTMwNVx1NTQyQlx1MjAxQyR7ZmlsZW5hbWV9XHUyMDFEXHVGRjBDXHU4MUVBXHU1MkE4XHU5MUNEXHU1NDdEXHU1NDBEXHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XHU1OTM5XHUzMDAyXCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX3JlbmFtZV9maWxlc1wiOiBcIlx1ODFFQVx1NTJBOFx1OTFDRFx1NTQ3RFx1NTQwRFx1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlwiLFxuICAgIFwic2V0dGluZ3NfYXV0b19yZW5hbWVfZmlsZXNfZGVzY1wiOiBcIlx1N0IxNFx1OEJCMFx1RkYwOG1kL2NhbnZhc1x1RkYwOVx1NTQwRFx1NzlGMFx1NTNEOFx1NTMxNlx1NjVGNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlx1NTQwRFx1NzlGMFx1NEUyRFx1NTMwNVx1NTQyQlx1MjAxQyR7bm90ZW5hbWV9XHUyMDFEXHVGRjBDXHU4MUVBXHU1MkE4XHU5MUNEXHU1NDdEXHU1NDBEXHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XHUzMDAyXCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX2RlbGV0ZV9mb2xkZXJcIjogXCJcdTgxRUFcdTUyQThcdTUyMjBcdTk2NjRcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcIixcbiAgICBcInNldHRpbmdzX2F1dG9fZGVsZXRlX2ZvbGRlcl9kZXNjXCI6IFwiXHU3QjE0XHU4QkIwXHVGRjA4bWQvY2FudmFzXHVGRjA5XHU1MjIwXHU5NjY0XHU2NUY2XHVGRjBDXHU1OTgyXHU2NzlDXHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XHU1OTM5XHU1NDBEXHU3OUYwXHU0RTJEXHU1MzA1XHU1NDJCXHUyMDFDJHtmaWxlbmFtZX1cdTIwMURcdUZGMENcdTgxRUFcdTUyQThcdTUyMjBcdTk2NjRcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcdTMwMDJcIixcbiAgICBcImNvbW1hbmRfdG9nZ2xlX2F0dGFjaG1lbnRfZm9sZGVyX3Zpc2liaWxpdHlcIjogXCJcdTUyMDdcdTYzNjJcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcdTc2ODRcdTIwMUNcdTY2M0VcdTc5M0EvXHU5NjkwXHU4NUNGXHUyMDFEXCIsXG4gICAgXCJzdGF0dXNfYXR0YWNobWVudF9mb2xkZXJfdmlzaWJpbGl0eVwiOiBcIlx1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlx1NTkzOVx1NURGMlx1OTY5MFx1ODVDRlwiLFxufVxuIiwgImV4cG9ydCBkZWZhdWx0IHtcbiAgICBcInBsdWdpbl9uYW1lXCI6IFwiQXR0YWNobWVudCBNYW5hZ2VyXCIsXG4gICAgXCJzZXR0aW5nc19mb2xkZXJfbmFtZVwiOiBcIkF0dGFjaG1lbnQgRm9sZGVyXCIsXG4gICAgXCJzZXR0aW5nc19mb2xkZXJfbmFtZV9kZXNjXCI6IFwiVGhlIG5hbWUgb2YgdGhlIGF0dGFjaG1lbnQgZm9sZGVyLCB1c2luZyB0aGUgdmFyaWFibGUgJHtmaWxlbmFtZX0gdG8gZ2V0IG5hbWUgb2YgdGhlIG5vdGUoXFxcIm1kL2NhbnZhc1xcXCIpIGZpbGUuIGUuZy4sICR7ZmlsZW5hbWV9X0F0dGFjaG1lbnRzIC5cIixcbiAgICBcInNldHRpbmdzX3Bhc3RlZF9pbWFnZV9maWxlX25hbWVcIjogXCJQYXN0ZWQgSW1hZ2UgTmFtZVwiLFxuICAgIFwic2V0dGluZ3NfcGFzdGVkX2ltYWdlX2ZpbGVfbmFtZV9kZXNjXCI6IFwiXFxcIlBhc3RlZCBJbWFnZVxcXCIgZmlsZSBuYW1lLCB1c2luZyB0aGUgdmFyaWFibGUgJHtub3RlbmFtZX0gdG8gZ2V0IG5hbWUgb2YgdGhlIG5vdGUoXFxcIm1kL2NhbnZhc1xcXCIpLCB1c2luZyB0aGUgdmFyaWFibGUgJHtkYXRldGltZX0gdG8gZ2V0IGRhdGV0aW1lLiBlLmcuLCAke25vdGVuYW1lfS0ke2RhdGV0aW1lfSkgLlwiLFxuICAgIFwic2V0dGluZ3NfZGF0ZXRpbWVfZm9ybWF0XCI6IFwiJHtkYXRldGltZX0gRm9ybWF0XCIsXG4gICAgXCJzZXR0aW5nc19kYXRldGltZV9mb3JtYXRfZGVzY1wiOiBcIkZvcm1hdCBmb3IgJHtkYXRldGltZX0gKHVzZSBtb21lbnQuanMgZm9ybWF0KS4gZS5nLiwgWVlZWU1NRERISG1tc3NTU1MgLlwiLFxuICAgIFwic2V0dGluZ3NfaGlkZV9mb2xkZXJcIjogXCJIaWRlIGF0dGFjaG1lbnQgZm9sZGVyXCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX3JlbmFtZV9mb2xkZXJcIjogXCJBdXRvbWF0aWNhbGx5IHJlbmFtZSBhdHRhY2htZW50IGZvbGRlclwiLFxuICAgIFwic2V0dGluZ3NfYXV0b19yZW5hbWVfZm9sZGVyX2Rlc2NcIjogXCJXaGVuIHJlbmFtaW5nIG5vdGUoXFxcIm1kL2NhbnZhc1xcXCIpLCBhdXRvbWF0aWNhbGx5IHJlbmFtZSBhdHRhY2htZW50IGZvbGRlciBpZiBmb2xkZXIgbmFtZSBjb250YWlucyBcXFwiJHtmaWxlbmFtZX1cXFwiLlwiLFxuICAgIFwic2V0dGluZ3NfYXV0b19yZW5hbWVfZmlsZXNcIjogXCJBdXRvbWF0aWNhbGx5IHJlbmFtZSBhdHRhY2htZW50IGZpbGVzXCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX3JlbmFtZV9maWxlc19kZXNjXCI6IFwiV2hlbiByZW5hbWluZyBub3RlKFxcXCJtZC9jYW52YXNcXFwiKSwgYXV0b21hdGljYWxseSByZW5hbWUgYXR0YWNobWVudCBmaWxlcyBpZiBmaWxlIG5hbWUgY29udGFpbnMgXFxcIiR7bm90ZW5hbWV9XFxcIi5cIixcbiAgICBcInNldHRpbmdzX2F1dG9fZGVsZXRlX2ZvbGRlclwiOiBcIkF1dG9tYXRpY2FsbHkgZGVsZXRlIGF0dGFjaG1lbnQgZm9sZGVyXCIsXG4gICAgXCJzZXR0aW5nc19hdXRvX2RlbGV0ZV9mb2xkZXJfZGVzY1wiOiBcIldoZW4gZGVsZXRpbmcgbm90ZShcXFwibWQvY2FudmFzXFxcIiksIGF1dG9tYXRpY2FsbHkgZGVsZXRlIGF0dGFjaG1lbnQgZm9sZGVyIGlmIGZvbGRlciBuYW1lIGNvbnRhaW5zIFxcXCIke2ZpbGVuYW1lfVxcXCIuXCIsXG4gICAgXCJjb21tYW5kX3RvZ2dsZV9hdHRhY2htZW50X2ZvbGRlcl92aXNpYmlsaXR5XCI6IFwiVG9nZ2xlIHZpc2liaWxpdHkgb2YgYXR0YWNobWVudCBmb2xkZXJcIixcbiAgICBcInN0YXR1c19hdHRhY2htZW50X2ZvbGRlcl92aXNpYmlsaXR5XCI6IFwiQXR0YWNobWVudCBmb2xkZXIgYXJlIGhpZGRlbi5cIixcbn1cbiIsICJpbXBvcnQgemggZnJvbSAnLi96aCc7XG5pbXBvcnQgZW4gZnJvbSAnLi9lbic7XG5cbmV4cG9ydCBjb25zdCBsYW5nID0ge1xuICAgIGVuLFxuICAgIHpoLFxuICAgIGdldChrZXk6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdThCRURcdThBMDBcdThCQkVcdTdGNkVcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlJykgfHwgXCJlblwiO1xuICAgICAgICAvLyBcdTYyN0VcdTRFMERcdTUyMzBcdTlFRDhcdThCQTQgZW5cbiAgICAgICAgY29uc3QgX2xhbmcgPSB0aGlzW2xhbmd1YWdlXSB8fCBlbjtcbiAgICAgICAgLy8gXHU2MjdFXHU0RTBEXHU1MjMwIGtleVx1RkYwQ1x1NzZGNFx1NjNBNVx1NEY3Rlx1NzUyOCBrZXlcbiAgICAgICAgbGV0IHRleHQgPSBfbGFuZ1trZXldIHx8IGtleTtcbiAgICAgICAgLy8gXHU2NkZGXHU2MzYyXHU1MzYwXHU0RjREXHU3QjI2XHU1M0MyXHU2NTcwXG4gICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoYFxcXFx7XFxcXHske2l9XFxcXH1cXFxcfWAsIFwiZ1wiKSwgYXJnc1tpXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIFZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb24ge1xuICAgIHZhdWx0OiBWYXVsdFxuICAgIGtleSA9IFwiYXR0YWNobWVudEZvbGRlclBhdGhcIlxuICAgIF92YWx1ZTogc3RyaW5nXG4gICAga2V5MiA9IFwibmV3TGlua0Zvcm1hdFwiXG4gICAgX3ZhbHVlMjogc3RyaW5nXG5cbiAgICBjb25zdHJ1Y3Rvcih2YXVsdDogVmF1bHQpIHtcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xuICAgIH1cblxuICAgIGJhY2t1cCgpIHtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdGhpcy52YXVsdC5nZXRDb25maWcodGhpcy5rZXkpO1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5fdmFsdWUyID0gdGhpcy52YXVsdC5nZXRDb25maWcodGhpcy5rZXkyKVxuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdGhpcy52YXVsdC5zZXRDb25maWcodGhpcy5rZXkyLCBcInJlbGF0aXZlXCIpO1xuICAgIH1cblxuICAgIHVwZGF0ZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnZhdWx0LnNldENvbmZpZyh0aGlzLmtleSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHJlc3RvcmUoKSB7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnZhdWx0LnNldENvbmZpZyh0aGlzLmtleSwgdGhpcy5fdmFsdWUpO1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdGhpcy52YXVsdC5zZXRDb25maWcodGhpcy5rZXkyLCB0aGlzLl92YWx1ZTIpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIi4uL1BsdWdpblwiXG5pbXBvcnQgeyBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvblwiXG5pbXBvcnQgeyBidWlsZEZvbGRlck5hbWUgfSBmcm9tIFwiLi4vU2V0dGluZ3NcIlxuXG5leHBvcnQgY2xhc3MgRmlsZU9wZW5IYW5kbGVyIHtcbiAgICBwbHVnaW46IFBsdWdpblxuICAgIHZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb246IFZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb25cblxuICAgIHN0YXRpYyBidWlsZChwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IEZpbGVPcGVuSGFuZGxlcihwbHVnaW4pO1xuICAgICAgICByZXR1cm4gaGFuZGxlci5oYW5kbGUuYmluZChoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uID0gcGx1Z2luLnZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb247XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlKGZpbGU6IFRGaWxlIHwgbnVsbCkge1xuICAgICAgICBjb25zb2xlLmxvZygnSGFuZGxlIEZpbGUgT3BlbicpO1xuXG4gICAgICAgIGlmIChmaWxlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gIT09ICdtZCcgJiYgZmlsZS5leHRlbnNpb24gIT09ICdjYW52YXMnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb24udXBkYXRlKGJ1aWxkRm9sZGVyTmFtZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgZmlsZS5uYW1lKSlcbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBWYXVsdCwgRmlsZVN5c3RlbUFkYXB0ZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgKiBhcyBQYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwiLi4vUGx1Z2luXCJcbmltcG9ydCB7IFZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9WYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uXCJcbmltcG9ydCB7IGJ1aWxkRm9sZGVyTmFtZSwgY29udGFpbnNGaWxlbmFtZSB9IGZyb20gXCIuLi9TZXR0aW5nc1wiXG5cbmV4cG9ydCBjbGFzcyBEZWxldGVIYW5kbGVyIHtcbiAgICB2YXVsdDogVmF1bHRcbiAgICBwbHVnaW46IFBsdWdpblxuICAgIGFkYXB0ZXI6IEZpbGVTeXN0ZW1BZGFwdGVyXG4gICAgdmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbjogVmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvblxuXG4gICAgc3RhdGljIGJ1aWxkKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgRGVsZXRlSGFuZGxlcihwbHVnaW4pO1xuICAgICAgICByZXR1cm4gaGFuZGxlci5oYW5kbGUuYmluZChoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnZhdWx0ID0gcGx1Z2luLmFwcC52YXVsdDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYWRhcHRlciA9IHBsdWdpbi5hZGFwdGVyO1xuICAgICAgICB0aGlzLnZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb24gPSBwbHVnaW4udmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbjtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGUoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0hhbmRsZSBEZWxldGUnKTtcblxuICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gIT09ICdtZCcgJiYgZmlsZS5leHRlbnNpb24gIT09ICdjYW52YXMnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTY3MkFcdTUzMDVcdTU0MkIgZmlsZW5hbWVcdUZGMENcdThCRjRcdTY2MEVcdTRFMERcdTY2MkZcdTZCQ0ZcdTRFMkFcdTY1ODdcdTRFRjZcdTRFMDBcdTRFMkFcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcdUZGMDhcdTRFMERcdTgwRkRcdTUyMjBcdTk2NjRcdUZGMDlcbiAgICAgICAgaWYgKCFjb250YWluc0ZpbGVuYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzKSB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0RlbGV0ZUZvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IFBhdGguam9pbihQYXRoLmRpcm5hbWUoZmlsZS5wYXRoKSwgYnVpbGRGb2xkZXJOYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLCBmaWxlLm5hbWUpKTtcblxuICAgICAgICBpZiAoYXdhaXQgdGhpcy5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkge1xuXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IHRyYXNoT3B0aW9uID0gdGhpcy52YXVsdC5nZXRDb25maWcoXCJ0cmFzaE9wdGlvblwiKTtcblxuICAgICAgICAgICAgaWYgKHRyYXNoT3B0aW9uID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGFwdGVyLnRyYXNoU3lzdGVtKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFzaE9wdGlvbiA9PT0gXCJsb2NhbFwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGFwdGVyLnRyYXNoTG9jYWwoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRhcHRlci5yZW1vdmUoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRlZCcsIGZvbGRlclBhdGgpXG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBUQWJzdHJhY3RGaWxlLCBWYXVsdCwgRmlsZU1hbmFnZXIsIEZpbGVTeXN0ZW1BZGFwdGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0ICogYXMgUGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIi4uL1BsdWdpblwiXG5pbXBvcnQgeyBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvblwiXG5pbXBvcnQgeyBidWlsZEZvbGRlck5hbWUsIGNvbnRhaW5zRmlsZW5hbWUgfSBmcm9tIFwiLi4vU2V0dGluZ3NcIlxuXG5leHBvcnQgY2xhc3MgUmVuYW1lSGFuZGxlciB7XG4gICAgdmF1bHQ6IFZhdWx0XG4gICAgcGx1Z2luOiBQbHVnaW5cbiAgICBhZGFwdGVyOiBGaWxlU3lzdGVtQWRhcHRlclxuICAgIGZpbGVNYW5hZ2VyOiBGaWxlTWFuYWdlclxuICAgIHZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb246IFZhdWx0QXR0YWNobWVudENvbmZpZ3VyYXRpb25cblxuICAgIHN0YXRpYyBidWlsZChwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IFJlbmFtZUhhbmRsZXIocGx1Z2luKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIuaGFuZGxlLmJpbmQoaGFuZGxlcik7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy52YXVsdCA9IHBsdWdpbi5hcHAudmF1bHQ7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFkYXB0ZXIgPSBwbHVnaW4uYWRhcHRlcjtcbiAgICAgICAgdGhpcy5maWxlTWFuYWdlciA9IHBsdWdpbi5hcHAuZmlsZU1hbmFnZXI7XG4gICAgICAgIHRoaXMudmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbiA9IHBsdWdpbi52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZShuZXdGaWxlOiBUQWJzdHJhY3RGaWxlLCBvbGRGaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdIYW5kbGUgUmVuYW1lJyk7XG5cbiAgICAgICAgaWYgKCEobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0ZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnICYmIG5ld0ZpbGUuZXh0ZW5zaW9uICE9PSAnY2FudmFzJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2NzJBXHU1MzA1XHU1NDJCIGZpbGVuYW1lXHVGRjBDXHU4QkY0XHU2NjBFXHU0RTBEXHU2NjJGXHU2QkNGXHU0RTJBIG1kIFx1NjU4N1x1NEVGNlx1NEUwMFx1NEUyQVx1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlx1NTkzOVxuICAgICAgICBpZiAoIWNvbnRhaW5zRmlsZW5hbWUodGhpcy5wbHVnaW4uc2V0dGluZ3MpIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lRm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3Rm9sZGVyTmFtZSA9IGJ1aWxkRm9sZGVyTmFtZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgbmV3RmlsZS5uYW1lKTtcbiAgICAgICAgdGhpcy52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uLnVwZGF0ZShuZXdGb2xkZXJOYW1lKVxuICAgICAgICBjb25zdCBuZXdGb2xkZXJQYXRoID0gbm9ybWFsaXplUGF0aChQYXRoLmpvaW4oUGF0aC5kaXJuYW1lKG5ld0ZpbGUucGF0aCksIG5ld0ZvbGRlck5hbWUpKTtcblxuICAgICAgICBjb25zdCBvbGRGb2xkZXJQYXRoID0gbm9ybWFsaXplUGF0aChQYXRoLmpvaW4oUGF0aC5kaXJuYW1lKG9sZEZpbGVQYXRoKSwgYnVpbGRGb2xkZXJOYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLCBQYXRoLmJhc2VuYW1lKG9sZEZpbGVQYXRoKSkpKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9yZW5hbWVGb2xkZXIob2xkRm9sZGVyUGF0aCwgbmV3Rm9sZGVyUGF0aCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lRmlsZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1ODAwMVx1NzY4NFx1NjU4N1x1NEVGNlx1NTQwRFx1NEUyRFx1NTI1NFx1OTY2NFx1NTQwRVx1N0YwMFx1RkYwOFx1NTA0N1x1NUI5QSByZW5hbWUgXHU1NDBFXHU3RjAwXHU0RTBEXHU0RjFBXHU1M0Q4XHU1MzE2XHVGRjA5XG4gICAgICAgIGF3YWl0IHRoaXMuX3JlbmFtZUZpbGVzKG5ld0ZvbGRlclBhdGgsIG5ld0ZpbGUuYmFzZW5hbWUsIFBhdGguYmFzZW5hbWUob2xkRmlsZVBhdGgsIFwiLlwiICsgbmV3RmlsZS5leHRlbnNpb24pKVxuICAgIH1cblxuICAgIGFzeW5jIF9yZW5hbWVGb2xkZXIob2xkRm9sZGVyUGF0aDogc3RyaW5nLCBuZXdGb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGF3YWl0ICF0aGlzLmFkYXB0ZXIuZXhpc3RzKG9sZEZvbGRlclBhdGgpIHx8IG9sZEZvbGRlclBhdGggPT09IG5ld0ZvbGRlclBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRGb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvbGRGb2xkZXJQYXRoKTtcblxuICAgICAgICBpZiAob2xkRm9sZGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShvbGRGb2xkZXIsIG5ld0ZvbGRlclBhdGgpO1xuXG4gICAgICAgIC8vIFx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVx1NEUzQVx1N0E3QVx1NjVGNlx1RkYwQ1x1OTg3QVx1NEZCRlx1NTIyMFx1OTY2NFx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVxuICAgICAgICBjb25zdCBvbGRGb2xkZXJQYXJlbnRQYXRoID0gUGF0aC5kaXJuYW1lKG9sZEZvbGRlclBhdGgpO1xuICAgICAgICBjb25zdCBvbGRGb2xkZXJQYXJlbnRMaXN0ZWRGaWxlcyA9IGF3YWl0IHRoaXMuYWRhcHRlci5saXN0KG9sZEZvbGRlclBhcmVudFBhdGgpO1xuICAgICAgICBpZiAob2xkRm9sZGVyUGFyZW50TGlzdGVkRmlsZXMuZm9sZGVycy5sZW5ndGggPT09IDAgJiYgb2xkRm9sZGVyUGFyZW50TGlzdGVkRmlsZXMuZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkYXB0ZXIucm1kaXIob2xkRm9sZGVyUGFyZW50UGF0aCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBfcmVuYW1lRmlsZXMobmV3Rm9sZGVyUGF0aDogc3RyaW5nLCBuZXdGaWxlTmFtZTogc3RyaW5nLCBvbGRGaWxlTmFtZTogc3RyaW5nKSB7XG5cbiAgICAgICAgY29uc3QgYXR0YWNobWVudEZpbGVzID0gKGF3YWl0IHRoaXMuYWRhcHRlci5saXN0KG5ld0ZvbGRlclBhdGgpKS5maWxlcztcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYXR0YWNobWVudEZpbGVzKSB7XG5cbiAgICAgICAgICAgIGxldCBhdHRhY2htZW50RmlsZU5hbWUgPSBQYXRoLmJhc2VuYW1lKGZpbGUpO1xuXG4gICAgICAgICAgICBpZiAoIWF0dGFjaG1lbnRGaWxlTmFtZS5jb250YWlucyhvbGRGaWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXR0YWNobWVudEZpbGVOYW1lID0gYXR0YWNobWVudEZpbGVOYW1lLnJlcGxhY2Uob2xkRmlsZU5hbWUsIG5ld0ZpbGVOYW1lKTtcblxuICAgICAgICAgICAgY29uc3QgbmV3RmlsZVBhdGggPSBub3JtYWxpemVQYXRoKFBhdGguam9pbihuZXdGb2xkZXJQYXRoLCBhdHRhY2htZW50RmlsZU5hbWUpKTtcblxuICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudEZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcbiAgICAgICAgICAgIGlmIChhdHRhY2htZW50RmlsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoYXR0YWNobWVudEZpbGUsIG5ld0ZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICcuLi9QbHVnaW4nXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSAnLi4vbGFuZydcbmltcG9ydCB7IGJ1aWxkRm9sZGVyUmVnRXhwIH0gZnJvbSAnLi4vU2V0dGluZ3MnXG5cbmV4cG9ydCBjbGFzcyBIaWRlRm9sZGVyIHtcbiAgICBwbHVnaW46IFBsdWdpblxuICAgIHJpYmJvbkljb25CdXR0b246IEhUTUxFbGVtZW50O1xuICAgIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50O1xuICAgIG11dGF0aW9uT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBsb2FkKCkge1xuICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG4gICAgICAgIHRoaXMucmliYm9uSWNvbkJ1dHRvbiA9IHRoaXMucGx1Z2luLmFkZFJpYmJvbkljb24oXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlRm9sZGVyID8gXCJleWUtb2ZmXCIgOiBcImV5ZVwiLFxuICAgICAgICAgICAgbGFuZy5nZXQoXCJjb21tYW5kX3RvZ2dsZV9hdHRhY2htZW50X2ZvbGRlcl92aXNpYmlsaXR5XCIpLFxuICAgICAgICAgICAgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXIgPSAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0gPSB0aGlzLnBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zZXRUZXh0KHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXIgPyBcIkF0dGFjaG1lbnQgZm9sZGVycyBhcmUgaGlkZGVuXCIgOiBcIlwiKTtcblxuICAgICAgICAvLyBUaGlzIGFkZHMgYSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRvZ2dsZS1hdHRhY2htZW50LWZvbGRlcl92aXNpYmlsaXR5XCIsXG4gICAgICAgICAgICBuYW1lOiBsYW5nLmdldChcImNvbW1hbmRfdG9nZ2xlX2F0dGFjaG1lbnRfZm9sZGVyX3Zpc2liaWxpdHlcIiksXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXIgPSAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvblJlY29yZCkgPT4ge1xuICAgICAgICAgICAgbXV0YXRpb25SZWNvcmQuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZWNvcmQudGFyZ2V0Py5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXYtZm9sZGVyXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEZvbGRlcnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHdpbmRvdy5kb2N1bWVudCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XG4gICAgICAgIH0sIDEwMDApXG4gICAgfVxuXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICAgICAgc2V0SWNvbih0aGlzLnJpYmJvbkljb25CdXR0b24sIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXIgPyBcImV5ZS1vZmZcIiA6IFwiZXllXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uaW5uZXJIVE1MID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlciA/IGxhbmcuZ2V0KFwic3RhdHVzX2F0dGFjaG1lbnRfZm9sZGVyX3Zpc2liaWxpdHlcIikgOiBcIlwiO1xuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hGb2xkZXJzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmcmVzaEZvbGRlcnMoKSB7XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IGJ1aWxkRm9sZGVyUmVnRXhwKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblxuICAgICAgICBjb25zdCBmb2xkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtZm9sZGVyXCIpO1xuXG4gICAgICAgIGZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGZvbGRlci5xdWVyeVNlbGVjdG9yKFwiLm5hdi1mb2xkZXItdGl0bGUtY29udGVudFwiKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlck5hbWUgPSB0aXRsZT8uaW5uZXJUZXh0O1xuICAgICAgICAgICAgaWYgKGZpbHRlci50ZXN0KGZvbGRlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgKGZvbGRlciBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXIgPyBcIm5vbmVcIiA6IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdW5sb2FkKCkge1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgV29ya3NwYWNlLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgRmlsZU1hbmFnZXIsIG5vcm1hbGl6ZVBhdGgsIFRleHRGaWxlVmlldywgRmlsZVN5c3RlbUFkYXB0ZXIsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0ICogYXMgUGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIi4uL1BsdWdpblwiXG5pbXBvcnQgeyBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvblwiXG5pbXBvcnQgeyBidWlsZEZvbGRlck5hbWUsIGJ1aWxkUGFzdGVkSW1hZ2VOYW1lIH0gZnJvbSBcIi4uL1NldHRpbmdzXCJcblxuZXhwb3J0IGNsYXNzIENyZWF0ZUhhbmRsZXIge1xuICAgIHZhdWx0OiBWYXVsdFxuICAgIHBsdWdpbjogUGx1Z2luXG4gICAgd29ya3NwYWNlOiBXb3Jrc3BhY2VcbiAgICBmaWxlTWFuYWdlcjogRmlsZU1hbmFnZXJcbiAgICB2YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uOiBWYXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uXG5cbiAgICBzdGF0aWMgYnVpbGQocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDcmVhdGVIYW5kbGVyKHBsdWdpbik7XG4gICAgICAgIHJldHVybiBoYW5kbGVyLmhhbmRsZS5iaW5kKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMudmF1bHQgPSBwbHVnaW4uYXBwLnZhdWx0O1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UgPSBwbHVnaW4uYXBwLndvcmtzcGFjZTtcbiAgICAgICAgdGhpcy5maWxlTWFuYWdlciA9IHBsdWdpbi5hcHAuZmlsZU1hbmFnZXI7XG4gICAgICAgIHRoaXMudmF1bHRBdHRhY2htZW50Q29uZmlndXJhdGlvbiA9IHBsdWdpbi52YXVsdEF0dGFjaG1lbnRDb25maWd1cmF0aW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZShmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdIYW5kbGUgRmlsZSBDcmVhdGUnKTtcblxuICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTk3NUVcdTdDOThcdThEMzRcdTc2ODRcdTU2RkVcdTcyNDdcdUZGMENcdThGRDRcdTU2REVcbiAgICAgICAgaWYgKCFmaWxlLm5hbWUuc3RhcnRzV2l0aChcIlBhc3RlZCBpbWFnZSBcIikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKFRleHRGaWxlVmlldyk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhY3RpdmVWaWV3Py5maWxlO1xuXG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFjdGl2ZSB0ZXh0IGZpbGUsIGBtZGAgb3IgYGNhbnZhc2BcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnICYmIGFjdGl2ZUZpbGUuZXh0ZW5zaW9uICE9PSAnY2FudmFzJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IFBhdGguam9pbihQYXRoLmRpcm5hbWUoYWN0aXZlRmlsZS5wYXRoKSwgYnVpbGRGb2xkZXJOYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLCBhY3RpdmVGaWxlLm5hbWUpKTtcblxuICAgICAgICAvLyBcdTRFMERcdTU3MjhcdTZGQzBcdTZEM0JcdTY1ODdcdTRFRjZcdTc2ODRcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcdTU5MzlcdTRFMkRcbiAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXJQYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2NUIwXHU3Njg0XHU2NTg3XHU0RUY2XHU1NDBEXG4gICAgICAgIGNvbnN0IGltYWdlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoUGF0aC5qb2luKGZvbGRlclBhdGgsIGJ1aWxkUGFzdGVkSW1hZ2VOYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLCBhY3RpdmVGaWxlLmJhc2VuYW1lKSArIFwiLlwiICsgZmlsZS5leHRlbnNpb24pKTtcblxuICAgICAgICBpZiAoYWN0aXZlRmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmFtZTRNRChmaWxlLCBpbWFnZVBhdGgsIGFjdGl2ZVZpZXcsIGFjdGl2ZUZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmVGaWxlLmV4dGVuc2lvbiA9PT0gJ2NhbnZhcycpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmFtZTRDYW52YXMoZmlsZSwgaW1hZ2VQYXRoLCBhY3RpdmVWaWV3KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIF9yZW5hbWU0TUQoZmlsZTogVEZpbGUsIG5ld1BhdGg6IHN0cmluZywgYWN0aXZlVmlldzogVGV4dEZpbGVWaWV3LCBhY3RpdmVGaWxlOiBURmlsZSkge1xuICAgICAgICBjb25zdCBvbGRMaW5rVGV4dCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoZmlsZSwgYWN0aXZlRmlsZS5wYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuICAgICAgICBjb25zdCBuZXdMaW5rVGV4dCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoZmlsZSwgYWN0aXZlRmlsZS5wYXRoKTtcblxuICAgICAgICBsZXQgY29udGVudCA9IGFjdGl2ZVZpZXcuZ2V0Vmlld0RhdGEoKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShvbGRMaW5rVGV4dCwgbmV3TGlua1RleHQpO1xuICAgICAgICBhY3RpdmVWaWV3LnNldFZpZXdEYXRhKGNvbnRlbnQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBhc3luYyBfcmVuYW1lNENhbnZhcyhmaWxlOiBURmlsZSwgbmV3UGF0aDogc3RyaW5nLCBhY3RpdmVWaWV3OiBUZXh0RmlsZVZpZXcpIHtcbiAgICAgICAgY29uc3Qgb2xkUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuXG4gICAgICAgIGxldCBjb250ZW50ID0gYWN0aXZlVmlldy5nZXRWaWV3RGF0YSgpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGAvKGZpbGVcXFxccypcXFxcOlxcXFxzKlxcXFxcIikke29sZFBhdGh9KFxcXFxcIikvZ2AsIGAkMSR7bmV3UGF0aH0kMmApO1xuICAgICAgICBhY3RpdmVWaWV3LnNldFZpZXdEYXRhKGNvbnRlbnQsIGZhbHNlKTtcbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FBLElBQUFBLG1CQUE0RDs7O0FDQTVELHNCQUF1QjtBQVl2QixJQUFNLFlBQVk7QUFDbEIsSUFBTSxZQUFZO0FBQ2xCLElBQU0sWUFBWTtBQUVYLElBQU0sbUJBQTZCO0FBQUEsRUFDdEMsWUFBWSxHQUFHO0FBQUEsRUFDZixpQkFBaUIsR0FBRyxhQUFhO0FBQUEsRUFDakMsZ0JBQWdCO0FBQUEsRUFDaEIsWUFBWTtBQUFBLEVBQ1osa0JBQWtCO0FBQUEsRUFDbEIsaUJBQWlCO0FBQUEsRUFDakIsa0JBQWtCO0FBQ3RCO0FBRU8sSUFBTSxtQkFBbUIsQ0FBQyxhQUF1QjtBQUNwRCxTQUFPLFNBQVMsV0FBVyxTQUFTLFNBQVM7QUFDakQ7QUFFQSxJQUFNLFNBQVMsQ0FBQyxTQUFpQjtBQUU3QixRQUFNLG9CQUFvQixDQUFDLE9BQU8sT0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLE9BQU8sT0FBTyxRQUFRLEtBQUs7QUFFckgsUUFBTSxNQUFNLElBQUksT0FBTyxNQUFNLGtCQUFrQixLQUFLLEVBQUUsSUFBSSxLQUFLLElBQUk7QUFFbkUsU0FBTyxLQUFLLFFBQVEsS0FBSyxDQUFDLGNBQXNCLEtBQUssV0FBVztBQUNwRTtBQUVPLElBQU0sb0JBQW9CLENBQUMsYUFBdUI7QUFDckQsTUFBSSxNQUFNLE9BQU8sU0FBUyxVQUFVO0FBQ3BDLFFBQU0sSUFBSSxRQUFRLE9BQU8sU0FBUyxHQUFHLElBQUk7QUFDekMsU0FBTyxJQUFJLE9BQU8sTUFBTSxNQUFNLEdBQUc7QUFDckM7QUFFTyxJQUFNLGtCQUFrQixDQUFDLFVBQW9CLGFBQXFCO0FBRXJFLFNBQU8sT0FBTyxTQUFTLFdBQVcsUUFBUSxXQUFXLFFBQVE7QUFDakU7QUFFTyxJQUFNLHVCQUF1QixDQUFDLFVBQW9CLGFBQXFCO0FBQzFFLFFBQU0sZUFBVyx3QkFBTyxFQUFFLE9BQU8sU0FBUyxjQUFjO0FBQ3hELFNBQU8sU0FBUyxnQkFBZ0IsUUFBUSxXQUFXLFFBQVEsRUFBRSxRQUFRLFdBQVcsUUFBUTtBQUM1Rjs7O0FDckRBLElBQUFDLG1CQUE4RDs7O0FDQTlELElBQU8sYUFBUTtBQUFBLEVBQ1gsZUFBZTtBQUFBLEVBQ2Ysd0JBQXdCO0FBQUEsRUFDeEIsNkJBQTZCO0FBQUEsRUFDN0IsbUNBQW1DO0FBQUEsRUFDbkMsd0NBQXdDO0FBQUEsRUFDeEMsNEJBQTRCO0FBQUEsRUFDNUIsaUNBQWlDO0FBQUEsRUFDakMsd0JBQXdCO0FBQUEsRUFDeEIsK0JBQStCO0FBQUEsRUFDL0Isb0NBQW9DO0FBQUEsRUFDcEMsOEJBQThCO0FBQUEsRUFDOUIsbUNBQW1DO0FBQUEsRUFDbkMsK0JBQStCO0FBQUEsRUFDL0Isb0NBQW9DO0FBQUEsRUFDcEMsK0NBQStDO0FBQUEsRUFDL0MsdUNBQXVDO0FBQzNDOzs7QUNqQkEsSUFBTyxhQUFRO0FBQUEsRUFDWCxlQUFlO0FBQUEsRUFDZix3QkFBd0I7QUFBQSxFQUN4Qiw2QkFBNkI7QUFBQSxFQUM3QixtQ0FBbUM7QUFBQSxFQUNuQyx3Q0FBd0M7QUFBQSxFQUN4Qyw0QkFBNEI7QUFBQSxFQUM1QixpQ0FBaUM7QUFBQSxFQUNqQyx3QkFBd0I7QUFBQSxFQUN4QiwrQkFBK0I7QUFBQSxFQUMvQixvQ0FBb0M7QUFBQSxFQUNwQyw4QkFBOEI7QUFBQSxFQUM5QixtQ0FBbUM7QUFBQSxFQUNuQywrQkFBK0I7QUFBQSxFQUMvQixvQ0FBb0M7QUFBQSxFQUNwQywrQ0FBK0M7QUFBQSxFQUMvQyx1Q0FBdUM7QUFDM0M7OztBQ2RPLElBQU0sT0FBTztBQUFBLEVBQ2hCO0FBQUEsRUFDQTtBQUFBLEVBQ0EsSUFBSSxRQUFnQixNQUF3QjtBQUV4QyxVQUFNLFdBQVcsT0FBTyxhQUFhLFFBQVEsVUFBVSxLQUFLO0FBRTVELFVBQU0sUUFBUSxLQUFLLFFBQVEsS0FBSztBQUVoQyxRQUFJLE9BQU8sTUFBTSxHQUFHLEtBQUs7QUFFekIsUUFBSSxNQUFNO0FBQ04sZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNsQyxlQUFPLEtBQUssUUFBUSxJQUFJLE9BQU8sU0FBUyxXQUFXLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQ3BFO0FBQUEsSUFDSjtBQUNBLFdBQU87QUFBQSxFQUNYO0FBQ0o7OztBSGhCTyxJQUFNLGFBQU4sY0FBeUIsa0NBQWlCO0FBQUEsRUFHN0MsWUFBWSxLQUFVLFFBQWdCO0FBQ2xDLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxVQUFnQjtBQUNaLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFFeEIsZ0JBQVksTUFBTTtBQUVsQixRQUFJLHlCQUFRLFdBQVcsRUFDbEIsUUFBUSxLQUFLLElBQUksc0JBQXNCLENBQUMsRUFDeEMsUUFBUSxLQUFLLElBQUksMkJBQTJCLENBQUMsRUFDN0MsUUFBUSxVQUFRLEtBQ1osZUFBZSxpQkFBaUIsVUFBVSxFQUMxQyxTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFDeEMsU0FBUyxPQUFPLFVBQWtCO0FBQy9CLGtCQUFRLGdDQUFjLEtBQUs7QUFDM0IsV0FBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDbkMsQ0FBQyxDQUFDO0FBRVYsUUFBSSx5QkFBUSxXQUFXLEVBQ2xCLFFBQVEsS0FBSyxJQUFJLGlDQUFpQyxDQUFDLEVBQ25ELFFBQVEsS0FBSyxJQUFJLHNDQUFzQyxDQUFDLEVBQ3hELFFBQVEsVUFBUSxLQUNaLGVBQWUsaUJBQWlCLGVBQWUsRUFDL0MsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLEVBQzdDLFNBQVMsT0FBTyxVQUFrQjtBQUMvQixXQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUVWLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLEtBQUssSUFBSSwwQkFBMEIsQ0FBQyxFQUM1QyxRQUFRLEtBQUssSUFBSSwrQkFBK0IsQ0FBQyxFQUNqRCxnQkFBZ0IsVUFBUSxLQUNwQixpQkFBaUIsaUJBQWlCLGNBQWMsRUFDaEQsU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFrQjtBQUMvQixXQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUVWLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLEtBQUssSUFBSSxzQkFBc0IsQ0FBQyxFQUN4QyxVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLEVBQ3hDLFNBQVMsT0FBTyxVQUFtQjtBQUNoQyxXQUFLLE9BQU8sU0FBUyxhQUFhO0FBQ2xDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsWUFBTSxLQUFLLE9BQU8sV0FBVyxRQUFRO0FBQUEsSUFDekMsQ0FBQyxDQUFDO0FBRVYsUUFBSSx5QkFBUSxXQUFXLEVBQ2xCLFFBQVEsS0FBSyxJQUFJLDZCQUE2QixDQUFDLEVBQy9DLFFBQVEsS0FBSyxJQUFJLGtDQUFrQyxDQUFDLEVBQ3BELFVBQVUsWUFBVSxPQUNoQixTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixFQUM5QyxTQUFTLE9BQU8sVUFBbUI7QUFDaEMsV0FBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNuQyxDQUFDLENBQUM7QUFFVixRQUFJLEtBQUssT0FBTyxTQUFTO0FBQ3JCLFVBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLEtBQUssSUFBSSw0QkFBNEIsQ0FBQyxFQUM5QyxRQUFRLEtBQUssSUFBSSxpQ0FBaUMsQ0FBQyxFQUNuRCxVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLEVBQzdDLFNBQVMsT0FBTyxVQUFtQjtBQUNoQyxhQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ25DLENBQUMsQ0FBQztBQUVkLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLEtBQUssSUFBSSw2QkFBNkIsQ0FBQyxFQUMvQyxRQUFRLEtBQUssSUFBSSxrQ0FBa0MsQ0FBQyxFQUNwRCxVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsRUFDOUMsU0FBUyxPQUFPLFVBQW1CO0FBQ2hDLFdBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDbkMsQ0FBQyxDQUFDO0FBQUEsRUFDZDtBQUNKOzs7QUkzRk8sSUFBTSwrQkFBTixNQUFtQztBQUFBLEVBT3RDLFlBQVksT0FBYztBQUwxQixlQUFNO0FBRU4sZ0JBQU87QUFJSCxTQUFLLFFBQVE7QUFBQSxFQUNqQjtBQUFBLEVBRUEsU0FBUztBQUVMLFNBQUssU0FBUyxLQUFLLE1BQU0sVUFBVSxLQUFLLEdBQUc7QUFFM0MsU0FBSyxVQUFVLEtBQUssTUFBTSxVQUFVLEtBQUssSUFBSTtBQUU3QyxTQUFLLE1BQU0sVUFBVSxLQUFLLE1BQU0sVUFBVTtBQUFBLEVBQzlDO0FBQUEsRUFFQSxPQUFPLE9BQWU7QUFFbEIsU0FBSyxNQUFNLFVBQVUsS0FBSyxLQUFLLEtBQUs7QUFBQSxFQUN4QztBQUFBLEVBRUEsVUFBVTtBQUVOLFNBQUssTUFBTSxVQUFVLEtBQUssS0FBSyxLQUFLLE1BQU07QUFFMUMsU0FBSyxNQUFNLFVBQVUsS0FBSyxNQUFNLEtBQUssT0FBTztBQUFBLEVBQ2hEO0FBQ0o7OztBQzNCTyxJQUFNLGtCQUFOLE1BQXNCO0FBQUEsRUFJekIsT0FBTyxNQUFNLFFBQWdCO0FBQ3pCLFVBQU0sVUFBVSxJQUFJLGdCQUFnQixNQUFNO0FBQzFDLFdBQU8sUUFBUSxPQUFPLEtBQUssT0FBTztBQUFBLEVBQ3RDO0FBQUEsRUFFQSxZQUFZLFFBQWdCO0FBQ3hCLFNBQUssU0FBUztBQUNkLFNBQUssK0JBQStCLE9BQU87QUFBQSxFQUMvQztBQUFBLEVBRUEsTUFBTSxPQUFPLE1BQW9CO0FBQzdCLFlBQVEsSUFBSSxrQkFBa0I7QUFFOUIsUUFBSSxRQUFRLE1BQU07QUFDZDtBQUFBLElBQ0o7QUFDQSxRQUFJLEtBQUssY0FBYyxRQUFRLEtBQUssY0FBYyxVQUFVO0FBQ3hEO0FBQUEsSUFDSjtBQUVBLFNBQUssNkJBQTZCLE9BQU8sZ0JBQWdCLEtBQUssT0FBTyxVQUFVLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDN0Y7QUFDSjs7O0FDL0JBLFdBQXNCO0FBTWYsSUFBTSxnQkFBTixNQUFvQjtBQUFBLEVBTXZCLE9BQU8sTUFBTSxRQUFnQjtBQUN6QixVQUFNLFVBQVUsSUFBSSxjQUFjLE1BQU07QUFDeEMsV0FBTyxRQUFRLE9BQU8sS0FBSyxPQUFPO0FBQUEsRUFDdEM7QUFBQSxFQUVBLFlBQVksUUFBZ0I7QUFDeEIsU0FBSyxRQUFRLE9BQU8sSUFBSTtBQUN4QixTQUFLLFNBQVM7QUFDZCxTQUFLLFVBQVUsT0FBTztBQUN0QixTQUFLLCtCQUErQixPQUFPO0FBQUEsRUFDL0M7QUFBQSxFQUVBLE1BQU0sT0FBTyxNQUFhO0FBQ3RCLFlBQVEsSUFBSSxlQUFlO0FBRTNCLFFBQUksS0FBSyxjQUFjLFFBQVEsS0FBSyxjQUFjLFVBQVU7QUFDeEQ7QUFBQSxJQUNKO0FBR0EsUUFBSSxDQUFDLGlCQUFpQixLQUFLLE9BQU8sUUFBUSxLQUFLLENBQUMsS0FBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ25GO0FBQUEsSUFDSjtBQUVBLFVBQU0sYUFBa0IsVUFBVSxhQUFRLEtBQUssSUFBSSxHQUFHLGdCQUFnQixLQUFLLE9BQU8sVUFBVSxLQUFLLElBQUksQ0FBQztBQUV0RyxRQUFJLE1BQU0sS0FBSyxRQUFRLE9BQU8sVUFBVSxHQUFHO0FBR3ZDLFlBQU0sY0FBYyxLQUFLLE1BQU0sVUFBVSxhQUFhO0FBRXRELFVBQUksZ0JBQWdCLFVBQVU7QUFDMUIsY0FBTSxLQUFLLFFBQVEsWUFBWSxVQUFVO0FBQUEsTUFDN0MsV0FBVyxnQkFBZ0IsU0FBUztBQUNoQyxjQUFNLEtBQUssUUFBUSxXQUFXLFVBQVU7QUFBQSxNQUM1QyxPQUFPO0FBQ0gsY0FBTSxLQUFLLFFBQVEsT0FBTyxVQUFVO0FBQUEsTUFDeEM7QUFDQSxjQUFRLElBQUksV0FBVyxVQUFVO0FBQUEsSUFDckM7QUFBQSxFQUNKO0FBQ0o7OztBQ3REQSxJQUFBQyxtQkFBMkY7QUFDM0YsSUFBQUMsUUFBc0I7QUFNZixJQUFNLGdCQUFOLE1BQW9CO0FBQUEsRUFPdkIsT0FBTyxNQUFNLFFBQWdCO0FBQ3pCLFVBQU0sVUFBVSxJQUFJLGNBQWMsTUFBTTtBQUN4QyxXQUFPLFFBQVEsT0FBTyxLQUFLLE9BQU87QUFBQSxFQUN0QztBQUFBLEVBRUEsWUFBWSxRQUFnQjtBQUN4QixTQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3hCLFNBQUssU0FBUztBQUNkLFNBQUssVUFBVSxPQUFPO0FBQ3RCLFNBQUssY0FBYyxPQUFPLElBQUk7QUFDOUIsU0FBSywrQkFBK0IsT0FBTztBQUFBLEVBQy9DO0FBQUEsRUFFQSxNQUFNLE9BQU8sU0FBd0IsYUFBcUI7QUFDdEQsWUFBUSxJQUFJLGVBQWU7QUFFM0IsUUFBSSxFQUFFLG1CQUFtQix5QkFBUTtBQUM3QjtBQUFBLElBQ0o7QUFFQSxRQUFJLFFBQVEsY0FBYyxRQUFRLFFBQVEsY0FBYyxVQUFVO0FBQzlEO0FBQUEsSUFDSjtBQUdBLFFBQUksQ0FBQyxpQkFBaUIsS0FBSyxPQUFPLFFBQVEsS0FBSyxDQUFDLEtBQUssT0FBTyxTQUFTLGtCQUFrQjtBQUNuRjtBQUFBLElBQ0o7QUFDQSxVQUFNLGdCQUFnQixnQkFBZ0IsS0FBSyxPQUFPLFVBQVUsUUFBUSxJQUFJO0FBQ3hFLFNBQUssNkJBQTZCLE9BQU8sYUFBYTtBQUN0RCxVQUFNLG9CQUFnQixnQ0FBbUIsV0FBVSxjQUFRLFFBQVEsSUFBSSxHQUFHLGFBQWEsQ0FBQztBQUV4RixVQUFNLG9CQUFnQixnQ0FBbUIsV0FBVSxjQUFRLFdBQVcsR0FBRyxnQkFBZ0IsS0FBSyxPQUFPLFVBQWUsZUFBUyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBRTNJLFVBQU0sS0FBSyxjQUFjLGVBQWUsYUFBYTtBQUVyRCxRQUFJLENBQUMsS0FBSyxPQUFPLFNBQVMsaUJBQWlCO0FBQ3ZDO0FBQUEsSUFDSjtBQUdBLFVBQU0sS0FBSyxhQUFhLGVBQWUsUUFBUSxVQUFlLGVBQVMsYUFBYSxNQUFNLFFBQVEsU0FBUyxDQUFDO0FBQUEsRUFDaEg7QUFBQSxFQUVBLE1BQU0sY0FBYyxlQUF1QixlQUF1QjtBQUM5RCxRQUFJLE1BQU0sQ0FBQyxLQUFLLFFBQVEsT0FBTyxhQUFhLEtBQUssa0JBQWtCLGVBQWU7QUFDOUU7QUFBQSxJQUNKO0FBQ0EsVUFBTSxZQUFZLEtBQUssTUFBTSxzQkFBc0IsYUFBYTtBQUVoRSxRQUFJLGFBQWEsTUFBTTtBQUNuQjtBQUFBLElBQ0o7QUFFQSxVQUFNLEtBQUssWUFBWSxXQUFXLFdBQVcsYUFBYTtBQUcxRCxVQUFNLHNCQUEyQixjQUFRLGFBQWE7QUFDdEQsVUFBTSw2QkFBNkIsTUFBTSxLQUFLLFFBQVEsS0FBSyxtQkFBbUI7QUFDOUUsUUFBSSwyQkFBMkIsUUFBUSxXQUFXLEtBQUssMkJBQTJCLE1BQU0sV0FBVyxHQUFHO0FBQ2xHLFlBQU0sS0FBSyxRQUFRLE1BQU0scUJBQXFCLElBQUk7QUFBQSxJQUN0RDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sYUFBYSxlQUF1QixhQUFxQixhQUFxQjtBQUVoRixVQUFNLG1CQUFtQixNQUFNLEtBQUssUUFBUSxLQUFLLGFBQWEsR0FBRztBQUVqRSxlQUFXLFFBQVEsaUJBQWlCO0FBRWhDLFVBQUkscUJBQTBCLGVBQVMsSUFBSTtBQUUzQyxVQUFJLENBQUMsbUJBQW1CLFNBQVMsV0FBVyxHQUFHO0FBQzNDO0FBQUEsTUFDSjtBQUVBLDJCQUFxQixtQkFBbUIsUUFBUSxhQUFhLFdBQVc7QUFFeEUsWUFBTSxrQkFBYyxnQ0FBbUIsV0FBSyxlQUFlLGtCQUFrQixDQUFDO0FBRTlFLFlBQU0saUJBQWlCLEtBQUssTUFBTSxzQkFBc0IsSUFBSTtBQUM1RCxVQUFJLGtCQUFrQixNQUFNO0FBQ3hCO0FBQUEsTUFDSjtBQUNBLFlBQU0sS0FBSyxZQUFZLFdBQVcsZ0JBQWdCLFdBQVc7QUFBQSxJQUNqRTtBQUFBLEVBQ0o7QUFDSjs7O0FDckdBLElBQUFDLG1CQUF3QjtBQU1qQixJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQU1wQixZQUFZLFFBQWdCO0FBQ3hCLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxPQUFPO0FBRUgsU0FBSyxtQkFBbUIsS0FBSyxPQUFPO0FBQUEsTUFDaEMsS0FBSyxPQUFPLFNBQVMsYUFBYSxZQUFZO0FBQUEsTUFDOUMsS0FBSyxJQUFJLDZDQUE2QztBQUFBLE1BQ3RELENBQUMsUUFBb0I7QUFDakIsYUFBSyxPQUFPLFNBQVMsYUFBYSxDQUFDLEtBQUssT0FBTyxTQUFTO0FBQ3hELGFBQUssT0FBTyxhQUFhO0FBQ3pCLGFBQUssUUFBUTtBQUFBLE1BQ2pCO0FBQUEsSUFDSjtBQUdBLFNBQUssZ0JBQWdCLEtBQUssT0FBTyxpQkFBaUI7QUFDbEQsU0FBSyxjQUFjLFFBQVEsS0FBSyxPQUFPLFNBQVMsYUFBYSxrQ0FBa0MsRUFBRTtBQUdqRyxTQUFLLE9BQU8sV0FBVztBQUFBLE1BQ25CLElBQUk7QUFBQSxNQUNKLE1BQU0sS0FBSyxJQUFJLDZDQUE2QztBQUFBLE1BQzVELFVBQVUsTUFBTTtBQUNaLGFBQUssT0FBTyxTQUFTLGFBQWEsQ0FBQyxLQUFLLE9BQU8sU0FBUztBQUN4RCxhQUFLLE9BQU8sYUFBYTtBQUN6QixhQUFLLFFBQVE7QUFBQSxNQUNqQjtBQUFBLElBQ0osQ0FBQztBQUVELFNBQUssbUJBQW1CLElBQUksaUJBQWlCLENBQUMsbUJBQW1CO0FBQzdELHFCQUFlLFFBQVEsWUFBVTtBQTVDN0M7QUE2Q2dCLGFBQUksa0JBQU8sV0FBUCxtQkFBZSxrQkFBZixtQkFBOEIsVUFBVSxTQUFTLGVBQWU7QUFDaEUsZUFBSyxlQUFlO0FBQUEsUUFDeEI7QUFBQSxNQUNKLENBQUM7QUFBQSxJQUNMLENBQUM7QUFDRCxXQUFPLFdBQVcsTUFBTTtBQUNwQixXQUFLLGlCQUFpQixRQUFRLE9BQU8sVUFBVSxFQUFFLFdBQVcsTUFBTSxTQUFTLEtBQUssQ0FBQztBQUFBLElBQ3JGLEdBQUcsR0FBSTtBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sVUFBVTtBQUNaLGtDQUFRLEtBQUssa0JBQWtCLEtBQUssT0FBTyxTQUFTLGFBQWEsWUFBWSxLQUFLO0FBQ2xGLFNBQUssY0FBYyxZQUFZLEtBQUssT0FBTyxTQUFTLGFBQWEsS0FBSyxJQUFJLHFDQUFxQyxJQUFJO0FBQ25ILFVBQU0sS0FBSyxlQUFlO0FBQUEsRUFDOUI7QUFBQSxFQUVBLE1BQU0saUJBQWlCO0FBQ25CLFVBQU0sU0FBUyxrQkFBa0IsS0FBSyxPQUFPLFFBQVE7QUFFckQsVUFBTSxVQUFVLFNBQVMsaUJBQWlCLGFBQWE7QUFFdkQsWUFBUSxRQUFRLENBQUMsV0FBVztBQUN4QixZQUFNLFFBQVEsT0FBTyxjQUFjLDJCQUEyQjtBQUM5RCxZQUFNLGFBQWEsK0JBQU87QUFDMUIsVUFBSSxPQUFPLEtBQUssVUFBVSxHQUFHO0FBQ3pCLFFBQUMsT0FBdUIsTUFBTSxVQUFVLEtBQUssT0FBTyxTQUFTLGFBQWEsU0FBUztBQUFBLE1BQ3ZGO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsU0FBUztBQUNMLFNBQUssaUJBQWlCLFdBQVc7QUFBQSxFQUNyQztBQUNKOzs7QUM5RUEsSUFBQUMsbUJBQW9IO0FBQ3BILElBQUFDLFFBQXNCO0FBTWYsSUFBTSxnQkFBTixNQUFvQjtBQUFBLEVBT3ZCLE9BQU8sTUFBTSxRQUFnQjtBQUN6QixVQUFNLFVBQVUsSUFBSSxjQUFjLE1BQU07QUFDeEMsV0FBTyxRQUFRLE9BQU8sS0FBSyxPQUFPO0FBQUEsRUFDdEM7QUFBQSxFQUVBLFlBQVksUUFBZ0I7QUFDeEIsU0FBSyxRQUFRLE9BQU8sSUFBSTtBQUN4QixTQUFLLFNBQVM7QUFDZCxTQUFLLFlBQVksT0FBTyxJQUFJO0FBQzVCLFNBQUssY0FBYyxPQUFPLElBQUk7QUFDOUIsU0FBSywrQkFBK0IsT0FBTztBQUFBLEVBQy9DO0FBQUEsRUFFQSxNQUFNLE9BQU8sTUFBcUI7QUFDOUIsWUFBUSxJQUFJLG9CQUFvQjtBQUVoQyxRQUFJLEVBQUUsZ0JBQWdCLHlCQUFRO0FBQzFCO0FBQUEsSUFDSjtBQUdBLFFBQUksQ0FBQyxLQUFLLEtBQUssV0FBVyxlQUFlLEdBQUc7QUFDeEM7QUFBQSxJQUNKO0FBRUEsVUFBTSxhQUFhLEtBQUssVUFBVSxvQkFBb0IsNkJBQVk7QUFDbEUsVUFBTSxhQUFhLHlDQUFZO0FBRS9CLFFBQUksQ0FBQyxZQUFZO0FBQ2I7QUFBQSxJQUNKO0FBRUEsUUFBSSxXQUFXLGNBQWMsUUFBUSxXQUFXLGNBQWMsVUFBVTtBQUNwRTtBQUFBLElBQ0o7QUFFQSxVQUFNLGFBQWtCLFdBQVUsY0FBUSxXQUFXLElBQUksR0FBRyxnQkFBZ0IsS0FBSyxPQUFPLFVBQVUsV0FBVyxJQUFJLENBQUM7QUFHbEgsUUFBSSxDQUFDLEtBQUssS0FBSyxXQUFXLFVBQVUsR0FBRztBQUNuQztBQUFBLElBQ0o7QUFHQSxVQUFNLGdCQUFZLGdDQUFtQixXQUFLLFlBQVkscUJBQXFCLEtBQUssT0FBTyxVQUFVLFdBQVcsUUFBUSxJQUFJLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFFN0ksUUFBSSxXQUFXLGNBQWMsTUFBTTtBQUMvQixXQUFLLFdBQVcsTUFBTSxXQUFXLFlBQVksVUFBVTtBQUFBLElBQzNEO0FBQ0EsUUFBSSxXQUFXLGNBQWMsVUFBVTtBQUNuQyxXQUFLLGVBQWUsTUFBTSxXQUFXLFVBQVU7QUFBQSxJQUNuRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sV0FBVyxNQUFhLFNBQWlCLFlBQTBCLFlBQW1CO0FBQ3hGLFVBQU0sY0FBYyxLQUFLLFlBQVkscUJBQXFCLE1BQU0sV0FBVyxJQUFJO0FBQy9FLFVBQU0sS0FBSyxZQUFZLFdBQVcsTUFBTSxPQUFPO0FBQy9DLFVBQU0sY0FBYyxLQUFLLFlBQVkscUJBQXFCLE1BQU0sV0FBVyxJQUFJO0FBRS9FLFFBQUksVUFBVSxXQUFXLFlBQVk7QUFDckMsY0FBVSxRQUFRLFFBQVEsYUFBYSxXQUFXO0FBQ2xELGVBQVcsWUFBWSxTQUFTLEtBQUs7QUFBQSxFQUN6QztBQUFBLEVBRUEsTUFBTSxlQUFlLE1BQWEsU0FBaUIsWUFBMEI7QUFDekUsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxLQUFLLFlBQVksV0FBVyxNQUFNLE9BQU87QUFFL0MsUUFBSSxVQUFVLFdBQVcsWUFBWTtBQUNyQyxjQUFVLFFBQVEsUUFBUSx3QkFBd0Isa0JBQWtCLEtBQUssV0FBVztBQUNwRixlQUFXLFlBQVksU0FBUyxLQUFLO0FBQUEsRUFDekM7QUFDSjs7O0FYM0VPLElBQU0sU0FBTixjQUFxQixpQkFBQUMsT0FBZTtBQUFBLEVBTXZDLE1BQU0sU0FBUztBQUNYLFlBQVEsSUFBSSxnQkFBZ0I7QUFFNUIsU0FBSyxVQUFVLEtBQUssSUFBSSxNQUFNO0FBQzlCLFNBQUssK0JBQStCLElBQUksNkJBQTZCLEtBQUssSUFBSSxLQUFLO0FBQ25GLFNBQUssNkJBQTZCLE9BQU87QUFFekMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFFekUsU0FBSyxjQUFjLElBQUksV0FBVyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBR2pELFNBQUssY0FBYyxLQUFLLElBQUksVUFBVSxHQUFHLGFBQWEsZ0JBQWdCLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFFbEYsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxjQUFjLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFFekUsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxjQUFjLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFFekUsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxjQUFjLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFFekUsU0FBSyxhQUFhLElBQUksV0FBVyxJQUFJO0FBQ3JDLFNBQUssV0FBVyxLQUFLO0FBQUEsRUFDekI7QUFBQSxFQUVBLFdBQVc7QUFDUCxZQUFRLElBQUksa0JBQWtCO0FBQzlCLFNBQUssNkJBQTZCLFFBQVE7QUFDMUMsU0FBSyxXQUFXLE9BQU87QUFBQSxFQUMzQjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ3JDO0FBQ0o7OztBRGhEQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIlBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJQYXRoIiwgIk9ic2lkaWFuUGx1Z2luIl0KfQo=
